@page "{id}"
@model CourseModel
@{
    ViewData["Title"] = "Course page";
}

<div class="col-md-8 blog-main">
    <div class="blog-post">
        <h2 class="blog-post-title">@Model.SelectedCourse.Name</h2>
        <p class="blog-post-meta">January 1, 2014 by <a href="#">Mark</a></p>
        <hr>
        @if (Model.SelectedCourse.Components != null && Model.SelectedCourse.Components.Count > 0)
            foreach (var item in Model.SelectedCourse.Components)
            {
                <h1>@item.Name</h1>
                <a asp-page="/ChapterPage" asp-route-Id="@item.Id">Continue reading</a>
            }

        <hr>


    </div>
         <button type="button" onclick="AddToFavorite(@Model.SelectedCourse.Id);">Подписаться</button>
</div>

<script>
    function AddToFavorite($Id) {
        console.log("Entered method");
        $.ajax({
            type: "POST",
            url: 'CoursePage?handler=AddToFavorite',

            data: {
                id: $("#CurrentCourse_Id").val(),
                courseId: $Id
            },
            beforeSend: function (xhr) {
                xhr.setRequestHeader("XSRF-TOKEN",
                    $('input:hidden[name="__RequestVerificationToken"]').val());
            },
            success() {

            },
            dataType: "json"
        }).done(function (data) {
            console.log(data.result);
        })
        $('#sortable > #' + $deleteId).remove();
    };
</script>
